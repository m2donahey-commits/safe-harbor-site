<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resource Map | Safe Harbor</title>
<link rel="stylesheet" href="style.css">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <style>
    /* Base */
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      background-color: #f7f9f6; /* soft cream */
      color: #2c3e50; /* slate grey */
      margin: 0;
      padding: 0;
    }

 header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  background-color: #E3F2FD; /* light blue header */
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

nav a {
  text-decoration: none;
  color: #2196F3; /* medium blue */
  font-weight: bold;
  transition: color 0.2s;
}

nav a:hover {
  color: #0D47A1; /* darker blue on hover */
}

nav a.active {
  color: #4CAF50; /* green for active page */
}
    /* Main card */
    main {
      max-width: 1000px;
      margin: 2rem auto;
      background: #fff;
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    /* Map */
    #mapid {
      height: 500px;
      border-radius: 14px;
      margin-top: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    /* Search */
    label { font-weight: 700; color: #356a75; }
    #search {
      padding: 8px 12px;
      border-radius: 12px;
      border: 1px solid #4CAF50;
      width: 60%;
      margin-right: 8px;
      background: #fff;
    }
    #searchBtn {
      padding: 8px 14px;
      border-radius: 12px;
      border: none;
      background: #4CAF50;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }
    #searchBtn:hover { background: #43A047; }

    /* Resource list */
    .resource-list { margin-top: 16px; }
    .resource-item {
      padding: 10px 14px;
      border-radius: 12px;
      margin-bottom: 10px;
      transition: transform 0.2s, background 0.2s, box-shadow 0.2s;
      border: 1px solid transparent;
      background: #eef5f1; /* default soft greenish */
    }
    .resource-item:hover {
      transform: scale(1.02);
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      background: #e6f2ec;
    }

    /* Color-code by category */
    .resource-item.shelter   { background: #e2f3e6; border-color: #a3c9a8; } /* green */
    .resource-item.advocacy  { background: #e7f2fd; border-color: #8cc6e1; } /* blue */
    .resource-item.housing   { background: #f2f2f2; border-color: #cccccc; } /* grey */

    /* Popup text styling */
    .leaflet-popup-content {
      font-family: "Segoe UI", sans-serif;
      font-size: 0.95rem;
      line-height: 1.4;
      color: #2f3e46;
    }
    .leaflet-popup-content b { color: #1b4332; }
    .leaflet-popup-content em { color: #52796f; }
    .leaflet-popup-content a { color: #0a9396; text-decoration: none; }
    .leaflet-popup-content a:hover { text-decoration: underline; }

    /* Legend */
    #legend {
      margin-top: 10px;
      font-size: 0.9em;
    }
    #legend .dot {
      display:inline-block; width:12px; height:12px; border-radius:50%; margin-right:6px;
    }

    /* Footer */
    footer {
      text-align: center;
      background-color: #4e7c6b;
      color: white;
      padding: 1rem;
      margin-top: 3rem;
      font-size: 0.9rem;
    }

    /* Quick Exit */
     .quick-exit {
    position: fixed;
    bottom: 12px;
    right: 12px;
    background: #e57373;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }

  .quick-exit:hover {
    background: #ef5350;
  }
  </style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:16px;">
    <a href="index.html">
      <img src="images/logo.png" alt="Safe Harbor Logo" style="height:120px;">
    </a>
    <div style="font-weight:800;font-size:18px;color:#2c3e50;">
      Finding Safety, Support, and Strength
    </div>
  </div>

  <nav style="display:flex;align-items:center;gap:20px;">
    <a href="index.html" class="nav-btn">Home</a>
    <a href="about.html" class="nav-btn">About</a>
    <a href="map.html" class="nav-btn">Resource Map</a>
    <a href="toolkit.html" class="nav-btn">Survivor Toolkit</a>
    <a href="family.html" class="nav-btn">For Friends & Family</a>
    <a href="tel:+18007997233" class="hotline" style="font-weight:bold;">üìû 1-800-799-7233</a>
  </nav>
</header>

  <main>
    <h2 style="color:#4CAF50;margin:0 0 10px;">Find Support Near You</h2>
    <p>Search for local shelters, advocacy centers, and support programs across Carver County and the Twin Cities area. Click a marker to learn more or browse the list below.</p>

    <label for="search">Search resources:</label>
    <input type="text" id="search" placeholder="Name, type, or address" />
    <button id="searchBtn">Search</button>

    <div id="mapid"></div>

    <div id="legend">
      <span class="dot" style="background:#4CAF50;"></span> Shelter
      <span class="dot" style="background:#64B5F6; margin-left:12px;"></span> Advocacy / Support
      <span class="dot" style="background:#90A4AE; margin-left:12px;"></span> Housing / Other
    </div>

    <div class="resource-list" id="resourceList"></div>
  </main>

  <footer>
    &copy; 2025 Safe Harbor | Empowering Survivors, Strengthening Communities
  </footer>

  <button class="quick-exit" id="quickExitBtn">Exit</button>

  <!-- Quick Exit (works on click + Esc/Cmd/Ctrl+Q) -->
  <script>
    const quickBtn = document.getElementById('quickExitBtn');
    quickBtn.addEventListener('click', () => window.location.replace('https://www.google.com'));
    window.addEventListener('keydown', e => {
      if (e.key === 'Escape' || ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'q')) {
        window.location.replace('https://www.google.com');
      }
    });
  </script>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Map + Data -->
  <script>
    /* ========= Your resources (unchanged) ========= */
    const sampleResources = [
      {
        id: 1,
        name: "Southern Valley Alliance",
        type: "Shelter & Advocacy",
        phone: "952-873-4214",
        address: "103 3rd Ave E, Shakopee, MN 55379",
        lat: 44.7970,
        lng: -93.5280,
        website: "https://svamn.org",
        description: "Provides crisis intervention, legal and court advocacy, transitional housing, safety planning, and support for survivors of domestic violence in Carver & Scott Counties.",
        hours: "Mon‚ÄìThu 8:30am‚Äì5:00pm, Fri 8:30am‚Äì12:00pm. Crisis line open 24/7.",
        languages: "English, Spanish"
      },
      {
        id: 2,
        name: "Sexual Violence Center",
        type: "Advocacy & Support",
        phone: "612-871-5111",
        address: "2600 E 25th St, Minneapolis, MN 55406",
        lat: 44.9430,
        lng: -93.2190,
        website: "https://www.sexualviolencecenter.org",
        description: "Free and confidential services for survivors of sexual violence, including advocacy, support groups, and hospital accompaniment.",
        hours: "By appointment; hotline 24/7",
        languages: "English, Spanish"
      },
      {
        id: 3,
        name: "Carver County Victim/Witness Services",
        type: "Victim Advocacy",
        phone: "952-361-1400",
        address: "604 E 4th St, Chaska, MN 55318",
        lat: 44.7845,
        lng: -93.6035,
        website: "https://www.carvercountymn.gov/departments/county-attorney/victim-witness-services",
        description: "County program providing advocacy, legal support, and referrals for victims of crime, including domestic and sexual violence survivors.",
        hours: "Mon‚ÄìFri 8:00am‚Äì4:30pm",
        languages: "English"
      },
      {
        id: 4,
        name: "CAP Agency ‚Äì Scott & Carver Housing Assistance",
        type: "Housing Assistance",
        phone: "952-496-2125",
        address: "738 1st Ave E, Shakopee, MN 55379",
        lat: 44.7964,
        lng: -93.5220,
        website: "https://capagency.org",
        description: "Provides housing assistance, rental/utility support, homelessness prevention, and specialized help for survivors of domestic violence.",
        hours: "Mon‚ÄìFri 8:00am‚Äì4:30pm",
        languages: "English"
      },
      {
        id: 5,
        name: "Carver County Health & Human Services",
        type: "Domestic Violence Support",
        phone: "952-361-1600",
        address: "602 E 4th St, Chaska, MN 55318",
        lat: 44.7840,
        lng: -93.6018,
        website: "https://www.carvercountymn.gov/departments/health-human-services",
        description: "Provides public health, housing, and family support services including referrals for domestic violence survivors.",
        hours: "Mon‚ÄìFri 8:00am‚Äì4:30pm",
        languages: "English, Spanish (by appointment)"
      },
      {
        id: 6,
        name: "Alexandra House",
        type: "Advocacy & Support",
        phone: "763-780-2330",
        address: "10065 73rd Ave NE, Blaine, MN 55434",
        lat: 45.1679,
        lng: -93.2097,
        website: "https://www.alexandrahouse.org",
        description: "Free services for domestic, sexual, and relationship violence survivors. Offers 24-hour emergency shelter, legal advocacy, and programs for youth and elders.",
        hours: "24-hour crisis line available.",
        languages: "English, Spanish, Hmong, Somali (as needed)"
      },
      {
        id: 7,
        name: "Sojourner Project",
        type: "Advocacy & Support",
        phone: "952-933-7422",
        address: "952 Hopkins Crossroad, Hopkins, MN 55343",
        lat: 44.9232,
        lng: -93.4088,
        website: "https://www.sojournerproject.org",
        description: "Emergency shelter, advocacy, and education for survivors of domestic and sexual violence in the western Twin Cities metro area.",
        hours: "Crisis line 24/7",
        languages: "English, Spanish"
      },
      {
        id: 8,
        name: "Tubman - Center East",
        type: "Housing, Advocacy & Support",
        phone: "612-825-0000",
        address: "1725 Monastery Way, Maplewood, MN 55109",
        lat: 44.9530,
        lng: -93.0223,
        website: "https://www.tubman.org",
        description: "Provides safe housing, legal services, therapy, and support for survivors of relationship violence, trafficking, and homelessness.",
        hours: "24-hour helpline available",
        languages: "English, Spanish, Somali, Hmong"
      }
    ];

    /* ========= Map init ========= */
    const map = L.map('mapid');
    const bounds = L.latLngBounds(sampleResources.map(r => [r.lat, r.lng]));
    map.fitBounds(bounds, { padding: [50, 50] });

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    /* ========= Marker icons =========
       Put these files in /icons:
       - green-marker.png  (Shelter)
       - blue-marker.png   (Advocacy/Support)
       - grey-marker.png   (Housing/Other)
    */
    const shelterIcon  = L.icon({ iconUrl: 'icons/green-marker.png', iconSize: [28,40], iconAnchor: [14,40] });
    const advocacyIcon = L.icon({ iconUrl: 'icons/blue-marker.png',  iconSize: [28,40], iconAnchor: [14,40] });
    const housingIcon  = L.icon({ iconUrl: 'icons/grey-marker.png',  iconSize: [28,40], iconAnchor: [14,40] });

    let markers = [];

    function renderMarkers(list){
      markers.forEach(m => map.removeLayer(m));
      markers = [];

      list.forEach(r => {
        let icon;
        const t = r.type.toLowerCase();
        if (t.includes('shelter')) icon = shelterIcon;
        else if (t.includes('advocacy') || t.includes('support')) icon = advocacyIcon;
        else icon = housingIcon;

        const marker = L.marker([r.lat, r.lng], { icon }).addTo(map);
        marker.bindPopup(`
          <div style="font-family:'Segoe UI',sans-serif; line-height:1.4; max-width:260px;">
            <b style="font-size:1.05em; color:#1b4332;">${r.name}</b><br>
            <em style="color:#52796f;">${r.type}</em><br>
            <div style="margin:4px 0;">${r.address}</div>
            <div>üìû <a href="tel:${r.phone.replace(/[^0-9+]/g,'')}" style="color:#0a9396;">${r.phone}</a></div>
            <div>üåê <a href="${r.website}" target="_blank" style="color:#0a9396;">Visit Website</a></div>
            <p style="margin:6px 0;">${r.description}</p>
            <div><b>Hours:</b> ${r.hours}</div>
            <div><b>Languages:</b> ${r.languages}</div>
          </div>
        `);
        markers.push(marker);
      });
    }

    function renderResources(list){
      const container = document.getElementById('resourceList');
      container.innerHTML = "";
      list.forEach(r => {
        const div = document.createElement('div');
        div.className = "resource-item";

        // color class by type
        const t = r.type.toLowerCase();
        if (t.includes('shelter')) div.classList.add('shelter');
        else if (t.includes('advocacy') || t.includes('support')) div.classList.add('advocacy');
        else div.classList.add('housing');

        div.innerHTML = `
          <b style="color:#1b4332;">${r.name}</b><br>
          <em style="color:#52796f;">${r.type}</em><br>
          <div>${r.address}</div>
          <div>üìû <a href="tel:${r.phone.replace(/[^0-9+]/g,'')}">${r.phone}</a></div>
          <div>üåê <a href="${r.website}" target="_blank">Visit Website</a></div>
          <p style="margin:6px 0;">${r.description}</p>
          <div><b>Hours:</b> ${r.hours}</div>
          <div><b>Languages:</b> ${r.languages}</div>
        `;
        container.appendChild(div);
      });
    }

    // Initial render
    renderMarkers(sampleResources);
    renderResources(sampleResources);

    // Search filter (list + markers)
    document.getElementById('searchBtn').addEventListener('click', () => {
      const q = document.getElementById('search').value.toLowerCase();
      const filtered = sampleResources.filter(r =>
        r.name.toLowerCase().includes(q) ||
        r.type.toLowerCase().includes(q) ||
        r.address.toLowerCase().includes(q)
      );
      renderResources(filtered);
      renderMarkers(filtered);
      if (filtered.length) {
        const b = L.latLngBounds(filtered.map(r => [r.lat, r.lng]));
        map.fitBounds(b, { padding: [50,50] });
      }
    });
  </script>
</body>
</html>


